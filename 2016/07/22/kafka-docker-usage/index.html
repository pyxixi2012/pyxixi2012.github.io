<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>kafka with docker 常用命令 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="kafka-dockerDockerfile for Apache Kafka
The image is available directly from https://registry.hub.docker.com/
Pre-Requisites
install docker-compose https://docs.docker.com/compose/install/
modify the">
<meta property="og:type" content="article">
<meta property="og:title" content="kafka with docker 常用命令">
<meta property="og:url" content="https://pyxixi2012.github.io/2016/07/22/kafka-docker-usage/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="kafka-dockerDockerfile for Apache Kafka
The image is available directly from https://registry.hub.docker.com/
Pre-Requisites
install docker-compose https://docs.docker.com/compose/install/
modify the">
<meta property="og:updated_time" content="2016-07-23T02:33:43.382Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kafka with docker 常用命令">
<meta name="twitter:description" content="kafka-dockerDockerfile for Apache Kafka
The image is available directly from https://registry.hub.docker.com/
Pre-Requisites
install docker-compose https://docs.docker.com/compose/install/
modify the">
  
    <link rel="alternative" href="[object Object]" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/logo.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">pyxixi2012</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">home</a></li>
				        
							<li><a href="/categories">categories</a></li>
				        
							<li><a href="/tags">tags</a></li>
				        
							<li><a href="/archives">archives</a></li>
				        
							<li><a href="/about">about</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="http://pyxixi2012.github.io" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/atom/" style="font-size: 10px;">atom</a> <a href="/tags/docker/" style="font-size: 18px;">docker</a> <a href="/tags/flume/" style="font-size: 12px;">flume</a> <a href="/tags/git/" style="font-size: 20px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/kafka/" style="font-size: 14px;">kafka</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/python/" style="font-size: 16px;">python</a> <a href="/tags/spark/" style="font-size: 10px;">spark</a> <a href="/tags/zookeeper/" style="font-size: 12px;">zookeeper</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://docker.io/">Docker IO</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://stackoverflow.com">Stackoverflow</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://slideshare.net">Slideshare</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://github.com">Github</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://python.org/">python org</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">老程序员一枚，互联网新兵，会点python，对docker感兴趣，做过点大叔据的东西，对nodejs，angular.js也挺感兴趣，就是感觉时间太少，太多的书没时间看，让我再年轻10岁吧 ～～～～</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">pyxixi2012</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/logo.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">pyxixi2012</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">home</a></li>
		        
					<li><a href="/categories">categories</a></li>
		        
					<li><a href="/tags">tags</a></li>
		        
					<li><a href="/archives">archives</a></li>
		        
					<li><a href="/about">about</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://pyxixi2012.github.io" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-kafka-docker-usage" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/22/kafka-docker-usage/" class="article-date">
  	<time datetime="2016-07-22T11:48:00.000Z" itemprop="datePublished">2016-07-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      kafka with docker 常用命令
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kafka/">kafka</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="kafka-docker"><a href="#kafka-docker" class="headerlink" title="kafka-docker"></a>kafka-docker</h1><p>Dockerfile for <a href="http://kafka.apache.org/" target="_blank" rel="external">Apache Kafka</a></p>
<p>The image is available directly from <a href="https://registry.hub.docker.com/" target="_blank" rel="external">https://registry.hub.docker.com/</a></p>
<h2 id="Pre-Requisites"><a href="#Pre-Requisites" class="headerlink" title="Pre-Requisites"></a>Pre-Requisites</h2><ul>
<li>install docker-compose <a href="https://docs.docker.com/compose/install/" target="_blank" rel="external">https://docs.docker.com/compose/install/</a></li>
<li>modify the <figure class="highlight plain"><figcaption><span>in ```docker-compose.yml``` to match your docker host IP (Note: Do not use localhost or 127.0.0.1 as the host ip if you want to run multiple brokers.)</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- if you want to customise any Kafka parameters, simply add them as environment variables in ```docker-compose.yml```, e.g. in order to increase the ```message.max.bytes``` parameter set the environment to ```KAFKA_MESSAGE_MAX_BYTES: 2000000```. To turn off automatic topic creation set ```KAFKA_AUTO_CREATE_TOPICS_ENABLE: &apos;false&apos;</div></pre></td></tr></table></figure></li>
</ul>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>Start a cluster:</p>
<ul>
<li><figure class="highlight plain"><figcaption><span>up -d ```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Add more brokers:</div><div class="line"></div><div class="line">- ```docker-compose scale kafka=3</div></pre></td></tr></table></figure>
</li>
</ul>
<p>Destroy a cluster:</p>
<ul>
<li><figure class="highlight plain"><figcaption><span>stop```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## Note</div><div class="line"></div><div class="line">The default ```docker-compose.yml``` should be seen as a starting point. By default each broker will get a new port number and broker id on restart. Depending on your use case this might not be desirable. If you need to use specific ports and broker ids, modify the docker-compose configuration accordingly, e.g. [docker-compose-single-broker.yml](https://github.com/wurstmeister/kafka-docker/blob/master/docker-compose-single-broker.yml):</div><div class="line"></div><div class="line">- ```docker-compose -f docker-compose-single-broker.yml up</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Broker-IDs"><a href="#Broker-IDs" class="headerlink" title="Broker IDs"></a>Broker IDs</h2><p>If you don’t specify a broker id in your docker-compose file, it will automatically be generated based on the name that docker-compose gives the container. This allows scaling up and down. In this case it is recommended to use the <code>--no-recreate</code> option of docker-compose to ensure that containers are not re-created and thus keep their names and ids.</p>
<h2 id="Automatically-create-topics"><a href="#Automatically-create-topics" class="headerlink" title="Automatically create topics"></a>Automatically create topics</h2><p>If you want to have kafka-docker automatically create topics in Kafka during<br>creation, a <code>KAFKA_CREATE_TOPICS</code> environment variable can be<br>added in <code>docker-compose.yml</code>.</p>
<p>Here is an example snippet from <code>docker-compose.yml</code>:</p>
<pre><code>environment:
  KAFKA_CREATE_TOPICS: &quot;Topic1:1:3,Topic2:1:1&quot;
</code></pre><p><code>Topic 1</code> will have 1 partition and 3 replicas, <code>Topic 2</code> will have 1 partition and 1 replica.</p>
<h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p><a href="http://wurstmeister.github.io/kafka-docker/" target="_blank" rel="external">http://wurstmeister.github.io/kafka-docker/</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/07/22/install_docker_spark/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Install spark 1.6.0 with docker
        
      </div>
    </a>
  
  
    <a href="/2016/07/22/install-flume-with-docker/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">安装Flume docker image</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>








<section id="comments">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pyxixi2012'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 pyxixi2012
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: undefined,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






  </div>
</body>
</html>