<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>kafka with docker 常用命令</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#00796b">
  <meta name="msapplication-TileColor" content="#4E8071"/>
  
  
  <link rel="alternative" href="/atom.xml" title="pyxixi2012 &#39;s blog" type="application/atom+xml">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css"> 
</head>


<body>

  <div id="container" class="container">
    <div class="left-col">
    <div class="intrude-less">
  <header id="header" class="inner">
    <a href="/" class="profilepic">
      <img lazy-src="/img/logo.png" class="block-select js-avatar">
	</a>
	<p class="header-subtitle">pyxixi2012</p>
    <nav class="header-menu">
      <ul>
        <li><a href="/archives">文章</a></li><li><a href="/categories/post">分类</a></li><li><a href="/tags">标签</a></li><li><a href="/about">关于</a></li>
      </ul>
    </nav>
  </header>				
</div>


    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  <div class="intrude-less">
    <header id="header" class="inner">
      <a href="/" class="profilepic">
        <img lazy-src="/img/logo.png" class="block-select js-avatar">
	  </a>
	  <p class="header-subtitle">pyxixi2012</p>
	  <nav class="header-menu">
	    <ul>
        <li><a href="/archives">文章</a></li><li><a href="/categories/post">分类</a></li><li><a href="/tags">标签</a></li><li><a href="/about">关于</a></li><div class="clearfix"></div>
		</ul>
	  </nav>
	</header>				
  </div>
</nav>

      <div class="body-wrap">
<article id="post-kafka-docker-usage" class="article article-type-post" itemscope itemprop="blogPost">

   
    
    <div class="article-meta">
      
<div class="article-date">
<span class="datetime-published-tag"> 2016-07-22 </span>
</div>


    </div>
    
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 class="article-title" itemprop="name">
      kafka with docker 常用命令
    </h1>
  

        
      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud block-select">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kafka/">kafka</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>


        
             <div class="clearfix"></div>
        
      </div>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="kafka-docker"><a href="#kafka-docker" class="headerlink" title="kafka-docker"></a>kafka-docker</h1><p>Dockerfile for <a href="http://kafka.apache.org/" target="_blank" rel="external">Apache Kafka</a></p>
<p>The image is available directly from <a href="https://registry.hub.docker.com/" target="_blank" rel="external">https://registry.hub.docker.com/</a></p>
<h2 id="Pre-Requisites"><a href="#Pre-Requisites" class="headerlink" title="Pre-Requisites"></a>Pre-Requisites</h2><ul>
<li>install docker-compose <a href="https://docs.docker.com/compose/install/" target="_blank" rel="external">https://docs.docker.com/compose/install/</a></li>
<li>modify the <figure class="highlight plain"><figcaption><span>in ```docker-compose.yml``` to match your docker host IP (Note: Do not use localhost or 127.0.0.1 as the host ip if you want to run multiple brokers.)</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- if you want to customise any Kafka parameters, simply add them as environment variables in ```docker-compose.yml```, e.g. in order to increase the ```message.max.bytes``` parameter set the environment to ```KAFKA_MESSAGE_MAX_BYTES: 2000000```. To turn off automatic topic creation set ```KAFKA_AUTO_CREATE_TOPICS_ENABLE: &apos;false&apos;</div></pre></td></tr></table></figure></li>
</ul>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>Start a cluster:</p>
<ul>
<li><figure class="highlight plain"><figcaption><span>up -d ```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Add more brokers:</div><div class="line"></div><div class="line">- ```docker-compose scale kafka=3</div></pre></td></tr></table></figure>
</li>
</ul>
<p>Destroy a cluster:</p>
<ul>
<li><figure class="highlight plain"><figcaption><span>stop```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## Note</div><div class="line"></div><div class="line">The default ```docker-compose.yml``` should be seen as a starting point. By default each broker will get a new port number and broker id on restart. Depending on your use case this might not be desirable. If you need to use specific ports and broker ids, modify the docker-compose configuration accordingly, e.g. [docker-compose-single-broker.yml](https://github.com/wurstmeister/kafka-docker/blob/master/docker-compose-single-broker.yml):</div><div class="line"></div><div class="line">- ```docker-compose -f docker-compose-single-broker.yml up</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Broker-IDs"><a href="#Broker-IDs" class="headerlink" title="Broker IDs"></a>Broker IDs</h2><p>If you don’t specify a broker id in your docker-compose file, it will automatically be generated based on the name that docker-compose gives the container. This allows scaling up and down. In this case it is recommended to use the <code>--no-recreate</code> option of docker-compose to ensure that containers are not re-created and thus keep their names and ids.</p>
<h2 id="Automatically-create-topics"><a href="#Automatically-create-topics" class="headerlink" title="Automatically create topics"></a>Automatically create topics</h2><p>If you want to have kafka-docker automatically create topics in Kafka during<br>creation, a <code>KAFKA_CREATE_TOPICS</code> environment variable can be<br>added in <code>docker-compose.yml</code>.</p>
<p>Here is an example snippet from <code>docker-compose.yml</code>:</p>
<pre><code>environment:
  KAFKA_CREATE_TOPICS: &quot;Topic1:1:3,Topic2:1:1&quot;
</code></pre><p><code>Topic 1</code> will have 1 partition and 3 replicas, <code>Topic 2</code> will have 1 partition and 1 replica.</p>
<h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p><a href="http://wurstmeister.github.io/kafka-docker/" target="_blank" rel="external">http://wurstmeister.github.io/kafka-docker/</a></p>

      
      
      
        <div class="post-copyright">
<p><a href="http://pyxixi2012.github.io/2016/07/22/kafka-docker-usage/">本文</a>为原创，转载请遵守本站<a href="/copyright/">版权声明</a></p>
<p class="updated-time" >更新于: </span>2016年7月23日 10:07</p>
</div>

      
    </div>
    
  </div>
  
    
<nav id="article-nav" class="block-select">
  
    <a href="/2016/07/22/install_docker_spark/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          Install spark 1.6.0 with docker
        
      </div>
    </a>
  
  
    <a href="/2016/07/22/install_flume_kafka_zookeeper_python_docker/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">安装flume zookeeper  kafka python 环境 基于docker image</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>


  
</article>




<section id="comments">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pyxixi2012'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


</div>
      <footer id="footer" class="block-select">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">&copy; 2015-2016
        <a href="/about" class ="aboutme-foot-tag"> alex yang</a>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script>
	var ThemeXConfig = {fancybox: false,mathjax: false,animate: true,isHome: false,isPost: true,isArchive: false,isTag: false,isCategory: false,open_in_new: false, CDN_PATH: '' }
</script>


    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/js/base.js"></script>
    <script src="/js/jquery.lazyload.min.js"></script>





  </div>
</body>
</html>
